(function(a){a.fn.abigimage=function(o){var b=a.extend(true,a.fn.abigimage.defaults,o);this.overlay=a("<div>").attr(b.overlayAttrs).css(b.overlayCSS).appendTo("body");this.layout=a("<div>").attr(b.layoutAttrs).css(b.layoutCSS).appendTo("body");this.prevBtnWrapper=a("<div>").attr(b.prevBtnWrapperAttrs).css(b.prevBtnWrapperCSS).appendTo(this.layout);this.prevBtnBox=a("<div>").attr(b.prevBtnBoxAttrs).css(b.prevBtnBoxCSS).appendTo(this.prevBtnWrapper);this.prevBtn=a("<div>").attr(b.prevBtnAttrs).css(b.prevBtnCSS).appendTo(this.prevBtnBox).html(b.prevBtnHtml);this.closeBtnWrapper=a("<div>").attr(b.closeBtnWrapperAttrs).css(b.closeBtnWrapperCSS).appendTo(this.layout);this.closeBtnBox=a("<div>").attr(b.closeBtnBoxAttrs).css(b.closeBtnBoxCSS).appendTo(this.closeBtnWrapper);this.closeBtn=a("<div>").attr(b.closeBtnAttrs).css(b.closeBtnCSS).appendTo(this.closeBtnBox).html(b.closeBtnHtml);this.img=a("<img>").attr(b.imgAttrs).css(b.imgCSS).appendTo(this.layout);this.imgNext=a("<img>").attr(b.imgNextAttrs).css(b.imgNextCSS).appendTo(this.layout);this.imgPrev=a("<img>").attr(b.imgPrevAttrs).css(b.imgPrevCSS).appendTo(this.layout);this.bottom=a("<div>").attr(b.bottomAttrs).css(b.bottomCSS).appendTo(this.layout);var n=this,j=0,f=null;function k(){var d=f+1;if(d===n.length){d=0}return d}function c(){var d=f-1;if(d===-1){d=n.length-1}return d}function h(){if(j===n.length-1){return m()}else{++j;return g(k())}}function e(){if(j===1-n.length){return m()}else{--j;return g(c())}}function l(d){if(b.keyNext.indexOf(d.which)!==-1){d.preventDefault();h()}else{if(b.keyPrev.indexOf(d.which)!==-1){d.preventDefault();e()}else{if(b.keyClose.indexOf(d.which)!==-1){d.preventDefault();m()}}}}function m(){j=0;n.overlay.fadeOut(b.fadeOut);n.layout.fadeOut(b.fadeOut);a(document).unbind("keydown",l);return false}function g(d){if(d<0||d>n.length-1){return}f=d;n.img.removeAttr("src").attr("src",a(n[f]).attr("href"));n.overlay.fadeIn(b.fadeIn);n.layout.fadeIn(b.fadeIn);b.onopen.call(n,n[f]);a(document).unbind("keydown",l).bind("keydown",l);return false}this.img.load(function(){n.imgNext.attr("src",a(n[k()]).attr("href"));n.imgPrev.attr("src",a(n[c()]).attr("href"))});this.img.click(function(){return h()});this.prevBtnWrapper.click(function(){return e()});this.closeBtnWrapper.click(function(){return m()});this.prevBtnWrapper.hover(function(){n.prevBtn.stop().animate(b.prevBtnHoverCSS,b.fadeIn)},function(){n.prevBtn.stop().animate(b.prevBtnCSS,b.fadeOut)});this.closeBtnWrapper.hover(function(){n.closeBtn.stop().animate(b.closeBtnHoverCSS,b.fadeIn)},function(){n.closeBtn.stop().animate(b.closeBtnCSS,b.fadeOut)});this.bottom.hover(function(){n.bottom.stop().animate(b.bottomHoverCSS,b.fadeIn)},function(){n.bottom.stop().animate(b.bottomCSS,b.fadeOut)});return this.each(function(d){a(this).click(function(){return g(d)})})};a.fn.abigimage.defaults={fadeIn:"fast",fadeOut:"fast",prevBtnHtml:"&larr;",closeBtnHtml:"x",keyNext:[13,32,39,40],keyPrev:[8,37,38],keyClose:[27,35,36],onopen:function(){},overlayCSS:{position:"fixed",zIndex:101,top:0,right:0,bottom:0,left:0,display:"none",backgroundColor:"#000",opacity:0.9},layoutCSS:{position:"fixed",zIndex:101,top:0,right:0,bottom:0,left:0,display:"none","-webkit-user-select":"none","-moz-user-select":"none","user-select":"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)",lineHeight:2.5},prevBtnWrapperCSS:{cursor:"pointer",position:"absolute",top:0,right:"50%",bottom:0,left:0},closeBtnWrapperCSS:{cursor:"pointer",position:"absolute",top:0,right:0,bottom:0,left:"50%"},prevBtnBoxCSS:{position:"absolute",zIndex:104,top:0,bottom:0,left:0},closeBtnBoxCSS:{position:"absolute",zIndex:104,top:0,bottom:0,right:0},prevBtnCSS:{color:"#fff",backgroundColor:"#000",opacity:0.5,padding:"0 1em",borderRadius:"0 0 1ex 0"},closeBtnCSS:{color:"#fff",backgroundColor:"#000",opacity:0.5,padding:"0 1em",borderRadius:"0 0 0 1ex"},prevBtnHoverCSS:{opacity:1},closeBtnHoverCSS:{opacity:1},imgCSS:{position:"absolute",zIndex:102,margin:"auto",width:"auto",top:0,right:0,bottom:0,left:0,display:"block",cursor:"pointer",maxWidth:"100%",maxHeight:"100%"},imgNextCSS:{position:"absolute",top:"-10000px",left:0,width:"1px"},imgPrevCSS:{position:"absolute",top:"-10000px",left:0,width:"1px"},bottomCSS:{position:"absolute",zIndex:103,right:0,bottom:0,left:0,"-webkit-user-select":"text","-moz-user-select":"text","user-select":"text",backgroundColor:"#000",color:"#fff",opacity:0.5,padding:"0 1em",textAlign:"center"},bottomHoverCSS:{opacity:1},overlayAttrs:{},layoutAttrs:{},prevBtnWrapperAttrs:{},prevBtnBoxAttrs:{},prevBtnAttrs:{},closeBtnWrapperAttrs:{},closeBtnBoxAttrs:{},closeBtnAttrs:{},imgAttrs:{},imgNextAttrs:{},imgPrevAttrs:{},bottomAttrs:{}}}(jQuery));